(this.webpackJsonpreact__aviasales=this.webpackJsonpreact__aviasales||[]).push([[0],{12:function(t,e,a){t.exports={header:"TicketItem_header__3JqcA",destination:"TicketItem_destination__Z8mY5",price:"TicketItem_price__2V5Z2",destinationCol:"TicketItem_destinationCol__bDX_m",destinationHeader:"TicketItem_destinationHeader__1zkc3",duration:"TicketItem_duration__3rEOF",ticketsField:"TicketItem_ticketsField__18q3b"}},15:function(t,e,a){t.exports={mainWrapper:"MainContent_mainWrapper__3Arsn",sectionButton:"MainContent_sectionButton__3goeC",searchField:"MainContent_searchField__1y6sd",ticketsField:"MainContent_ticketsField__L7QRZ",sideBar:"MainContent_sideBar__3IIle",content:"MainContent_content__20fCh"}},23:function(t,e,a){t.exports={wrapper:"DirectionChoice_wrapper__3MAb_",inner:"DirectionChoice_inner__2PD-8",selectDestination:"DirectionChoice_selectDestination__N_WRd",planeImg:"DirectionChoice_planeImg__5TxRB"}},25:function(t,e,a){t.exports={container:"Header_container__1VC87",description:"Header_description__2ZXU4",title:"Header_title__3SH2Q",subtitle:"Header_subtitle__VxvKU"}},27:function(t,e,a){t.exports={sortingPanel:"SortTickets_sortingPanel__2hDqa",left:"SortTickets_left__136pJ",right:"SortTickets_right__1FEtk",active:"SortTickets_active__1SVeg"}},28:function(t,e,a){t.exports={container:"ShowErrors_container__23C5l",title:"ShowErrors_title__30erH",description:"ShowErrors_description__2pVlT"}},31:function(t,e,a){t.exports={main:"App_main__3ZkGI",container:"App_container__1MQN3"}},32:function(t,e,a){t.exports={title:"TransferFlightsFilter_title__23NOH",filterList:"TransferFlightsFilter_filterList__1aR6i"}},43:function(t,e,a){t.exports={block:"Block_block__JTAl1"}},44:function(t,e,a){t.exports={button:"Button_button__1Nk4s"}},45:function(t,e,a){t.exports={filterItem:"TransferFlightsFilterItem_filterItem__o8d-V"}},46:function(t,e,a){t.exports={ticketList:"TicketList_ticketList__3tCrx"}},52:function(t,e,a){},53:function(t,e,a){},74:function(t,e,a){"use strict";a.r(e);var c=a(1),i=a(42),n=a.n(i),r=(a(51),a(52),a(53),a(14)),s=a.n(r),o=a(19),l=a(16),d=a(31),j=a.n(d),u=a(25),h=a.n(u),p=a.p+"static/media/logo.edd7ec35.png",b=a(2),k=function(){return Object(b.jsxs)("div",{className:h.a.container,children:[Object(b.jsx)("img",{src:p,alt:"Aviasales"}),Object(b.jsxs)("div",{className:h.a.description,children:[Object(b.jsx)("h1",{className:h.a.title,children:"Aviasales"}),Object(b.jsx)("p",{className:h.a.subtitle,children:"\u041f\u043e\u0438\u0441\u043a \u0434\u0435\u0448\u0451\u0432\u044b\u0445 \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432"})]})]})},O=a(43),_=a.n(O),x=function(t){return Object(b.jsx)("div",{className:_.a.block,children:t.children})},m=a.p+"static/media/plane.894d5538.svg",f=a(23),v=a.n(f),g=function(){return Object(b.jsx)("div",{className:v.a.wrapper,children:Object(b.jsx)(x,{children:Object(b.jsxs)("div",{className:v.a.inner,children:[Object(b.jsx)("div",{className:v.a.selectDestination,children:"\u041c\u043e\u0441\u043a\u0432\u0430, \u0420\u043e\u0441\u0441\u0438\u044f (MOW)"}),Object(b.jsx)("div",{children:Object(b.jsx)("img",{className:v.a.planeImg,src:m,alt:"plane"})}),Object(b.jsx)("div",{className:v.a.selectDestination,children:"\u041f\u0445\u0443\u043a\u0435\u0442, \u0422\u0430\u0438\u043b\u0430\u043d\u0434 (HKT)"})]})})})},y=a(15),S=a.n(y),N=a(4),D=a(44),T=a.n(D),w=function(t){var e=t.name,a=t.onHandleClick,c=t.showLoading;return Object(b.jsx)("button",{className:T.a.button,onClick:a,disabled:c,children:c?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430...":e})},C=a(77),F=a(76),I=Object(c.createContext)(null),H=function(){var t=Object(c.useContext)(I),e=t.state.ticketStackSize,a=t.showLoading,i=t.getData;return Object(b.jsx)(C.a,{children:!e&&Object(b.jsx)(F.a.div,Object(N.a)(Object(N.a)({className:S.a.searchField},{animate:{opacity:1},exit:{opacity:0},transition:{delay:.2,duration:.3}}),{},{children:Object(b.jsx)(w,{name:"\u041d\u0430\u0439\u0442\u0438 \u0431\u0438\u043b\u0435\u0442\u044b",onHandleClick:i,showLoading:a})}))})},L=a(32),z=a.n(L),B=a(45),E=a.n(B),M=function(t){var e=t.filter,a=t.onFilterChange;return Object(b.jsxs)("div",{className:E.a.filterItem,children:[Object(b.jsx)("input",{type:"checkbox",id:"filter-checkbox-".concat(e.value),checked:e.checked,onChange:function(){a(e.value)}}),Object(b.jsx)("label",{htmlFor:"filter-checkbox-".concat(e.value),children:e.title})]})},P=function(){var t=Object(c.useContext)(I).dispatch,e=Object(c.useState)([{value:"all",title:"\u0412\u0441\u0435",checked:!0},{value:0,title:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",checked:!1},{value:1,title:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",checked:!1},{value:2,title:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:!1},{value:3,title:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:!1}]),a=Object(l.a)(e,2),i=a[0],n=a[1],r=function(e){var a,c=!1;"all"===e?a=i.map((function(t){return t.checked=t.value===e,t})):(c=(a=i.map((function(t){return"all"===t.value?t.checked=!1:e===t.value&&(t.checked=!t.checked),t}))).filter((function(t){return t.checked})).map((function(t){return t.value}))).length||(c=!1,a[0].checked=!0),n(a),t({type:"changeFilter",payload:{ticketFilter:c}}),t({type:"sortData"})};return Object(b.jsxs)(x,{children:[Object(b.jsx)("h3",{className:z.a.title,children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),Object(b.jsx)("div",{className:z.a.filterList,children:i.map((function(t){return Object(b.jsx)(M,{filter:t,onFilterChange:r},t.value)}))})]})},A=a(27),R=a.n(A),V=function(){var t=Object(c.useContext)(I),e=t.state,a=t.dispatch,i=function(t){a({type:"changeSortType",payload:{sortType:t.target.dataset.key}}),a({type:"sortData"})},n=function(t,a,c){return Object(b.jsx)("li",{className:"".concat(R.a[c],"\n          ").concat(e.sortType===a?R.a.active:""),"data-key":a,onClick:i,children:t})};return Object(b.jsxs)("ul",{className:R.a.sortingPanel,children:[n("\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439","cheaper","left"),n("\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439","faster","center"),n("\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439","optimal","right")]})},J=a(46),U=a.n(J),W=a(12),Z=a.n(W);function q(t){var e,a=function(t){return t<10?"0".concat(t):t},c=Date.parse(t.date),i=c+60*t.duration*1e3,n=a(Math.floor(t.duration/60)),r=a(t.duration%60),s=function(t){var e=a(new Date(t).getUTCHours()),c=a(new Date(t).getMinutes());return"".concat(e,":").concat(c)};return{origin:t.origin,destination:t.destination,stops:[t.stops,(e=t.stops.length,e?"".concat(e,1===e?" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":e>=2&&e<=4?" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438":" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"):"\u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")],startTime:s(c),endTime:s(i),duration:"".concat(n,"\u0447 ").concat(r,"\u043c")}}var Q=function(t){var e=t.ticketRawData,a=q(e.segments[0]),c=q(e.segments[1]),i=function(t){return Object(b.jsxs)("div",{className:Z.a.destination,children:[Object(b.jsxs)("div",{className:Z.a.destinationCol,children:[Object(b.jsxs)("div",{className:Z.a.destinationHeader,children:[t.origin," \u2013 ",t.destination]}),Object(b.jsxs)("div",{children:[t.startTime," \u2013 ",t.endTime]})]}),Object(b.jsx)("div",{className:Z.a.destinationCol,children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:Z.a.destinationHeader,children:"\u0412 \u043f\u0443\u0442\u0438"}),Object(b.jsx)("div",{className:Z.a.duration,children:t.duration})]})}),Object(b.jsxs)("div",{className:Z.a.destinationCol,children:[Object(b.jsx)("div",{className:Z.a.destinationHeader,children:t.stops[1]}),Object(b.jsx)("div",{children:t.stops[0].join(", ")})]})]})};return Object(b.jsxs)(x,{children:[Object(b.jsxs)("div",{className:Z.a.header,children:[Object(b.jsx)("div",{className:Z.a.price,children:"".concat(e.price.toLocaleString("ru")," \u0420")}),Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:"https://pics.avs.io/99/36/".concat(e.carrier,".png"),width:99,height:36,alt:e.carrier})})]}),i(a),i(c)]})},Y=function(t){var e=t.ticketList,a=t.ticketStackSize,c=e.slice(0,a),i={initial:{opacity:0,scaleY:.5},animate:{opacity:1,scaleY:1,transition:{ease:"easeOut",duration:.35}}};return Object(b.jsx)(C.a,{exitBeforeEnter:!0,children:Object(b.jsx)("ul",{className:U.a.ticketList,children:c.map((function(t,e){return Object(b.jsx)(F.a.li,Object(N.a)(Object(N.a)({},i),{},{children:Object(b.jsx)(Q,{ticketRawData:t})}),t.price+e)}))})})},K=function(){var t=Object(c.useContext)(I),e=t.state,a=t.dispatch,i=t.showLoading;return Object(b.jsx)(C.a,{children:e.ticketStackSize&&Object(b.jsxs)(F.a.div,Object(N.a)(Object(N.a)({className:S.a.ticketsField},{initial:{opacity:0,y:50},animate:{opacity:1,y:0,transition:{type:"tween",delay:.55}}}),{},{children:[Object(b.jsx)("div",{className:S.a.sideBar,children:Object(b.jsx)(P,{})}),Object(b.jsxs)("div",{className:S.a.content,children:[Object(b.jsx)(V,{}),Object(b.jsx)(Y,{ticketList:e.ticketProcessedData,ticketStackSize:e.ticketStackSize}),e.moreTickets&&Object(b.jsx)("div",{className:S.a.sectionButton,children:Object(b.jsx)(w,{name:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435 5 \u0431\u0438\u043b\u0435\u0442\u043e\u0432!",onHandleClick:function(){a({type:"setTicketStackSize"})},showLoading:i})})]})]}))})},X=a(28),G=a.n(X),$=function(){var t=Object(c.useContext)(I).showError;return Object(b.jsx)(C.a,{children:t&&Object(b.jsx)(F.a.div,Object(N.a)(Object(N.a)({className:G.a.container},{initial:{opacity:0,y:50},animate:{opacity:1,y:0,transition:{type:"tween"}},exit:{opacity:0,y:50}}),{},{children:Object(b.jsxs)(x,{children:[Object(b.jsx)("h2",{className:G.a.title,children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445!"}),Object(b.jsx)("p",{className:G.a.description,children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."})]})}))})},tt=function(){return Object(b.jsxs)("div",{className:S.a.mainWrapper,children:[Object(b.jsx)(H,{}),Object(b.jsx)(K,{}),Object(b.jsx)($,{})]})};var et=a(33),at=a.n(et);function ct(){return it.apply(this,arguments)}function it(){return(it=Object(o.a)(s.a.mark((function t(){var e,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,at.a.get("https://front-test.beta.aviasales.ru/search");case 2:return e=t.sent,t.next=5,at.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e.data.searchId));case 5:return a=t.sent,t.abrupt("return",a.data.tickets);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var nt=a(22),rt=function(t,e){var a=function(t){return t.sort((function(t,e){return t.price-e.price}))},c=function(t){return t.sort((function(t,e){return t.segments[0].duration-e.segments[0].duration}))};if("cheaper"===e)return a(t);if("faster"===e)return c(t);if("optimal"===e){var i=a(t),n=c(i.splice(0,t.length/2));return[].concat(Object(nt.a)(n),Object(nt.a)(i))}throw new Error("Unknown sort type")},st=function(t,e){switch(e.type){case"setData":var a=e.payload,c=a.ticketData,i=a.ticketStackSize;return Object(N.a)(Object(N.a)({},t),{},{ticketData:c,ticketStackSize:i});case"setTicketStackSize":var n={ticketStackSize:t.ticketStackSize+5};return n.ticketStackSize>t.ticketData.length&&(n.ticketStackSize=t.ticketData.length,n.moreTickets=!1),Object(N.a)(Object(N.a)({},t),n);case"changeSortType":var r=e.payload.sortType;return Object(N.a)(Object(N.a)({},t),{},{sortType:r});case"sortData":var s={};return t.ticketFilter?s.ticketProcessedData=rt(Object(nt.a)(t.ticketProcessedData),t.sortType):(s.ticketData=rt(Object(nt.a)(t.ticketData),t.sortType),s.ticketProcessedData=s.ticketData),Object(N.a)(Object(N.a)({},t),s);case"changeFilter":var o=e.payload.ticketFilter,l={};return o&&(l.ticketProcessedData=t.ticketData.filter((function(t){return o.includes(t.segments[0].stops.length)}))),Object(N.a)(Object(N.a)({},t),{},{ticketFilter:o},l);default:throw new Error("Unknown action")}},ot=function(){var t=Object(c.useReducer)(st,{ticketData:[],ticketProcessedData:[],ticketStackSize:0,ticketFilter:!1,moreTickets:!0,sortType:"cheaper"}),e=Object(l.a)(t,2),a=e[0],i=e[1],n=function(t){var e=Object(c.useState)(!1),a=Object(l.a)(e,2),i=a[0],n=a[1],r=Object(c.useState)(""),d=Object(l.a)(r,2),j=d[0],u=d[1];return[function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!0),e.next=4,t();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),n(!1),u(e.t0.message);case 10:return e.prev=10,n(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,6,10,13]])})));return function(){return e.apply(this,arguments)}}(),i,j]}(Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct();case 2:e=t.sent,i({type:"setData",payload:{ticketData:e,ticketStackSize:5}}),i({type:"sortData"});case 5:case"end":return t.stop()}}),t)})))),r=Object(l.a)(n,3),d=r[0],u=r[1],h=r[2];return Object(b.jsx)("div",{className:j.a.main,children:Object(b.jsxs)("div",{className:j.a.container,children:[Object(b.jsx)(k,{}),Object(b.jsxs)("main",{children:[Object(b.jsx)(g,{}),Object(b.jsx)(I.Provider,{value:{state:a,dispatch:i,showLoading:u,getData:d,showError:h},children:Object(b.jsx)(tt,{})})]})]})})};n.a.render(Object(b.jsx)(ot,{}),document.getElementById("root"))}},[[74,1,2]]]);