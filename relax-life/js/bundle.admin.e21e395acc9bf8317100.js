!function(){"use strict";var t,e,n,o,a,r,c,s,i,u,l,d,f={1370:function(t){t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},6250:function(t,e,n){t.exports=n.p+"admin/img/sprite.svg"}},p={};function m(t){var e=p[t];if(void 0!==e)return e.exports;var n=p[t]={exports:{}};return f[t](n,n.exports,m),n.exports}m.m=f,m.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return m.d(e,{a:e}),e},m.d=function(t,e){for(var n in e)m.o(e,n)&&!m.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},m.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),m.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t;m.g.importScripts&&(t=m.g.location+"");var e=m.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),m.p=t+"../"}(),m.b=document.baseURI||self.location.href,e=m(1370),n=m.n(e),o=new URL(m(6250),m.b),n()(o,{hash:"#sorting"}),n()(o,{hash:"#plus"}),n()(o,{hash:"#close_modal"}),a=function(t){var e=t.url,n=t.method,o=t.body;return fetch(e,{method:n,headers:{"Content-Type":"application/json"},body:o})},r=function(t){return a({url:t,method:"GET"}).then((function(t){if(200===t.status)return t.json();throw new Error(t.statusText)}))},c=function(t){var e=new Map,n=document.getElementById("typeItem"),o=function(t){var e=document.getElementById("tbody");e.textContent="",t.forEach((function(t){var n=document.createElement("tr");n.className="table__row",n.setAttribute("data-id",t.id),n.innerHTML='\n                <td class="table__id table__cell">'.concat(t.id,'</td>\n                <td class="table-type table__cell">').concat(t.type,'</td>\n                <td class="table-name table__cell">').concat(t.name,'</td>\n                <td class="table-units table__cell">').concat(t.units,'</td>\n                <td class="table-cost table__cell">').concat(t.cost,' руб</td>\n                <td>\n                    <div class="table__actions table__cell">\n                        <button class="button action-change"><span class="svg_ui">\n                            <svg class="action-icon_change">\n                                <use xlink:href="./img/sprite.svg#change"></use>\n                            </svg></span><span>Изменить</span>\n                        </button>\n                        <button class="button action-remove"><span class="svg_ui">\n                            <svg class="action-icon_remove">\n                                <use xlink:href="./img/sprite.svg#remove"></use>\n                            </svg></span><span>Удалить</span>\n                        </button>\n                    </div>\n                </td>\n            '),e.append(n)}))},a=function(t){var a;t.forEach((function(t){e.has(t.type)?e.get(t.type).push(t):e.set(t.type,[t])})),a=e.keys(),n.innerHTML='<option value="Все услуги">Все услуги</option>',Array.from(a).forEach((function(t){var e=document.createElement("option");e.value=t,e.textContent=t,n.append(e)})),o(Array.from(e.values()).flat())};n.addEventListener("change",(function(t){var n=t.target;e.get(n.value)?o(e.get(n.value)):o(Array.from(e.values()).flat())})),r(t+"/api/items").then((function(t){return a(t)})).catch((function(t){console.warn(t)}))},s=function(t,e){var n={};new FormData(e).forEach((function(t,e){n[e]=t})),e.reset(),a({url:t+"/api/items",method:"POST",body:JSON.stringify(n)}).then((function(e){if(201!==e.status)throw new Error(e.statusText);c(t)})).catch((function(t){console.warn(t)}))},i=function(t,e){a({url:"".concat(t,"/api/items/").concat(e),method:"DELETE"}).then((function(e){if(200!==e.status)throw new Error(e.statusText);c(t)})).catch((function(t){console.warn(t)}))},u=function(t){var e=document.getElementById("modal");document.addEventListener("click",(function(n){var o=n.target,a=document.getElementById("new-item-form");o.closest(".btn-addItem")&&e.classList.add("show"),(o.classList.contains("modal__overlay")||o.closest(".button__close"))&&e.classList.remove("show"),o.closest(".cancel-button")&&(n.preventDefault(),a.reset(),e.classList.remove("show")),o.closest(".action-remove")&&confirm("Вы действительно хотите удалить услугу?")&&i(t,o.closest(".table__row").getAttribute("data-id"))})),document.addEventListener("submit",(function(n){n.preventDefault(),e.classList.remove("show"),s(t,n.target)}))},l="https://obscure-scrubland-21489.herokuapp.com",d=window.location.origin+"/relax-life",new RegExp("demo").test(document.cookie)||(t=d+"/admin",document.location.replace(t)),c(l),u(l)}();